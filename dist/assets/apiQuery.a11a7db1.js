import{C as a}from"./index.2c7b21bb.js";let t=JSON.parse(localStorage.getItem("user")),e=t.jwt;a.defaults.headers.common.Authorization=`bearer ${e}`;const s={getFollowship:async t=>{const e=await a.get("/api/followships/count",{params:{following:t}});return{following:(await a.get("/api/followships/count",{params:{user:t}})).data,followers:e.data}},getImagesOfUser:async()=>(await a.get("/api/posts",{params:{user:t.id}})).data.map((({images:a})=>a)),createComment:async(t,e,s=0,i=5)=>{let o=await a.post("/api/comments/",{comment:t,post:e});return console.log(o),o=o.data,o},toggleALike:async(t,e)=>{var s,i;const o=await(null==(i=null==(s=await a.get(`/api/likes?_user=${t}&_post=${e}`))?void 0:s.data[0])?void 0:i.id);return o?(await a.delete(`/api/likes/${o}`),!0):(await(await a.post("/api/likes",{post:e,user:t})).data,!0)},didUserLike:async(t,e)=>{const s=await a.get(`/api/likes?_user=${t}&_post=${e}`);return Boolean(s.data.length)||!1},handleFollow:async t=>(await a.post("/api/followships",{following:Number(t)})).data,getAllComments:async(t,e=0,s=5)=>(e+=1,(await a.get("/api/comments",{params:{post:t,_start:e,_limit:s}})).data),getAllPosts:async(t,e=0,s=5)=>(1,(await a.get("/api/posts",{params:{_limit:s,_star:_star,user_nin:t}})).data),getMultipleUsers:async t=>{let e=Math.ceil(1),s=await a.get("/users/count",{params:{id_nin:t}});s=s.data,s=Math.floor(s+1);let i=[];for(let a=0;a<s;a++)i.push(a);i=Array.from(i,(function(){return Math.floor(Math.random()*(s-e))+e})),i=[...new Set(i)],i.forEach(((a,e)=>{a===t&&i.splice(e,1)}));let o=i.map((t=>a.get(`/users/${t}`)));return i=await Promise.allSettled(o),i=i.map((a=>({id:a.value.data.id,username:a.value.data.username,email:a.value.data.email,profile_pic:a.value.data.profile_pic}))),i},getOnePost:async t=>(_start+=1,(await a.get(`/api/posts/${t}`)).data),getCommentsForPost:async(t,e=0,s=5)=>(e+=1,(await a.get("/api/comments",{params:{post:t,_limit:s,_start:e}})).data),getMultiplePosts:async t=>{if(!t)return[];let e=await a.get("/api/followships",{params:{user:t}});e=e.data.map((a=>a.following.id));let s="";return e.forEach((a=>{s+=`user_in=${a}&`})),await(await a.get(`/api/posts?${s}`)).data},getAUser:async t=>(await a.get("/api/search-users",{params:{username:t}})).data,isUserFollowing:async e=>(await a.get("/api/followships/count",{params:{user:t.id,following:e}})).data};export{s as q};
